@property --percent-x {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
};

@property --percent-y {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
};

@property --thumbSize {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
};

@property --sizeCoef {
    syntax: "<number>";
    inherits: true;
    initial-value: 1;
};

@property --scroll-left {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
};

@property --scroll-top {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
};

@keyframes scroll-percent-x {
    0% {
        --percent-x: 0.0;
    }

    100% {
        --percent-x: 1.0;
    }
};

@keyframes scroll-percent-y {
    0% {
        --percent-y: 0.0;
    }

    100% {
        --percent-y: 1.0;
    }
};

@layer ux-scrollbox {

    :host(x-scrollbox) {
        display: block;
        position: relative;
        overflow: scroll;
        inset: 0px;
        padding: 0px;

        //
        inline-size: 100%;
        block-size: 100%;

        //
        contain: layout !important;
        container-type: size !important;
        background-color: transparent;

        //
        --percent-x: 0.0;
        --percent-y: 0.0;

        //
        scroll-timeline: --scroll-y vertical, --scroll-x horizontal !important;
        scroll-timeline: --scroll-y block, --scroll-x inline !important;

        //
        scrollbar-gutter: stable both-edges;
        scrollbar-width: none;

        //
        --sb-color: #101010;

        //
        rotate: none;
        scale: none;
        translate: none;
        transform: none;

        //
        transform-origin: 50% 50%;
        backface-visibility: visible;

        //
        filter: none;
        backdrop-filter: none;
        will-change: auto;
        perspective: none;
        isolation: auto;

        //
        &, & > :where(*) {
            will-change: scroll-position, contents;
            touch-action: pan-x pan-y manipulation;

            //
            pointer-events: auto;
        }

        //
        & :where(.scrollbar-x, .scrollbar-y) {
            user-select: none;
            pointer-events: none;

            contain: none !important;
            container-type: normal !important;
            position: fixed !important;
            display: block;
            inset: 0px;

            //
            line-height: 0px;
            background-color: transparent !important;
            animation-timing-function: linear;
            animation-duration: 1ms;
            animation-fill-mode: both;

            will-change: --percent-x, --percent-y;

            touch-action: none;
            z-index: 9999;

            & :where(.thumb) {
                pointer-events: auto;

                position: static;
                display: block;
                line-height: 0px;

                border-radius: 0.125rem;
                background-color: var(--sb-color, #101010);

                user-select: none;
                touch-action: none;

                cursor: grab;

                &:active {
                    cursor: grabbing;
                }
            }
        }

        & :is(.scrollbar-y) {
            inset-inline-start: auto;
            //inset-inline-end: 0px;
            //inset-block-start: 0px;
            inset-block-end: auto;

            inset-block-start: calc(0px + var(--scroll-top) * 1px);
            inset-inline-end: calc(0px - var(--scroll-left) * 1px);

            animation-name: scroll-percent-y !important;
            animation-timeline: --scroll-y !important;

            block-size: calc(100cqb - 1rem);
            inline-size: 1rem;

            & :where(.thumb) {
                inline-size: 100%;
                block-size: calc(100cqb * var(--sizeCoef, 1));
                max-block-size: 100%;

                translate: 0px calc(var(--percent-y) * (1 - var(--sizeCoef, 1)) * 100cqb);
            }
        }

        & :is(.scrollbar-x) {
            inset-block-start: auto;
            //inset-block-end: 0px;
            //inset-inline-start: 0px;
            inset-inline-end: auto;

            inset-block-end: calc(0px - var(--scroll-top) * 1px);
            inset-inline-start: calc(0px + var(--scroll-left) * 1px);

            animation-name: scroll-percent-x !important;
            animation-timeline: --scroll-x !important;

            inline-size: calc(100cqi - 1rem);
            block-size: 1rem;

            & :where(.thumb) {
                block-size: 100%;
                inline-size: calc(100cqi * var(--sizeCoef, 1));
                max-inline-size: 100%;

                translate: calc(var(--percent-x) * (1 - var(--sizeCoef, 1)) * 100cqi) 0px;
            }
        }

    }

}
